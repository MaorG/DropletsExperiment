<main>
name, rootDir, global, parameterSpace, load, prep, entities, analysis, output
'microbiotaPaper', '\\qnap01\LongTerm\Maor\microbiota v3\wells\', {'pixelSize' 0.16}, {'well' 'time' 'exper'}, '<load>', '<prep>', '<entities>', '<analysis>', '<output>'


<load>

exper,well,time,BF,GFP,RFP, bactChannel, otherChannel, bactThresh, otherThresh, HRFThresh1, cropRect
#'a506+pear', 'A1', 16, 'tif_8h\img_T1_A1_BF.tif', 'tif_8h\img_T1_A1_GFP.tif', 'tif_8h\img_T1_A1_RFP.tif', 'RFP', 'GFP', 1500, 500                ,[10000 7000 4000] ,{}
#'a506+pear', 'A2', 16, 'tif_8h\img_T1_A2_BF.tif', 'tif_8h\img_T1_A2_GFP.tif', 'tif_8h\img_T1_A2_RFP.tif', 'RFP', 'GFP', 1500, 500                ,[10000 7000 4000] ,{}
#'a506+pear', 'A3', 16, 'tif_8h\img_T1_A3_BF.tif', 'tif_8h\img_T1_A3_GFP.tif', 'tif_8h\img_T1_A3_RFP.tif', 'RFP', 'GFP', 1500, 500                ,[10000 7000 4000] ,{}
#'b728+pear', 'A5', 16, 'tif_8h\img_T1_A5_BF.tif', 'tif_8h\img_T1_A5_GFP.tif', 'tif_8h\img_T1_A5_RFP.tif', 'GFP', 'RFP', 1000, 1000               ,[5000 3500 2000]  ,{}
#'b728+pear', 'A6', 16, 'tif_8h\img_T1_A6_BF.tif', 'tif_8h\img_T1_A6_GFP.tif', 'tif_8h\img_T1_A6_RFP.tif', 'GFP', 'RFP', 1000, 1000               ,[5000 3500 2000]  ,{}
#'b728+pear', 'B1', 16, 'tif_8h\img_T1_B1_BF.tif', 'tif_8h\img_T1_B1_GFP.tif', 'tif_8h\img_T1_B1_RFP.tif', 'GFP', 'RFP', 1000, 1000               ,[5000 3500 2000]  ,{}
#'a506+bean', 'C1', 16, 'tif_8h\img_T1_C1_BF.tif', 'tif_8h\img_T1_C1_GFP.tif', 'tif_8h\img_T1_C1_RFP.tif', 'RFP', 'GFP', [5000 2000], [1000 800]  ,[5000 3500 2000]  ,{}
#'a506+bean', 'C2', 16, 'tif_8h\img_T1_C2_BF.tif', 'tif_8h\img_T1_C2_GFP.tif', 'tif_8h\img_T1_C2_RFP.tif', 'RFP', 'GFP', [5000 2000], [1000 800]  ,[5000 3500 2000]  ,{}
#'a506+bean', 'C3', 16, 'tif_8h\img_T1_C3_BF.tif', 'tif_8h\img_T1_C3_GFP.tif', 'tif_8h\img_T1_C3_RFP.tif', 'RFP', 'GFP', [5000 2000], [1000 800]  ,[5000 3500 2000]  ,{}
'b728+bean', 'C5', 16, 'tif_8h\img_T1_C5_BF.tif', 'tif_8h\img_T1_C5_GFP.tif', 'tif_8h\img_T1_C5_RFP.tif', 'GFP', 'RFP', 1500, 1000               ,[5000 3500 2000]  ,{2000 4000 4000 5930}
'b728+bean', 'C6', 16, 'tif_8h\img_T1_C6_BF.tif', 'tif_8h\img_T1_C6_GFP.tif', 'tif_8h\img_T1_C6_RFP.tif', 'GFP', 'RFP', 1500, 1000               ,[5000 3500 2000]  ,{1 2000 4000 5930}
#'b728+bean', 'D1', 16, 'tif_8h\img_T1_D1_BF.tif', 'tif_8h\img_T1_D1_GFP.tif', 'tif_8h\img_T1_D1_RFP.tif', 'GFP', 'RFP', 2000, 1000               ,[5000 3500 2000]  ,{'a' 2000 4000 2000 4000}
 
<prep>
resName, funcName, parameters
#'BF',  'cropImage', {'src' 'BF'  'borders' 'cropRect'}
#'RFP', 'cropImage', {'src' 'RFP' 'borders' 'cropRect'}
#'GFP', 'cropImage', {'src' 'GFP' 'borders' 'cropRect'}
#'allMask', 'segmentObjectsHRF', {'src' 'BF' 'RGBsrc' 'BF'  'verbose' 0 'HRFThresh' 'HRFThresh1'}

# check mode of morph op order
# 1st
'bactMask', 'classifyByFluorescenseTemp2', {'originalMask' 'allMask' 'RGBsrc' 'BFs' 'verbose' 0}
'bactMaskDilated', 'morphOp', {'src' 'bactMask' 'op' 'dilate' 'dist' 1}
'microbiotaMask', 'booleanOp', {'src1' 'allMask' 'src2' 'bactMaskDilated' 'op' 'difference'}
'microbiotaMask', 'morphOp', {'src' 'microbiotaMask' 'op' 'areaOpen' 'dist' 0.5}
'microbiotaMask', 'morphOp', {'src' 'microbiotaMask' 'op' 'areaOpen' 'dist' 1.5}

'bactMask', 'morphOp', {'src' 'bactMask' 'op' 'areaOpen' 'dist' 0.5}
'bactMask', 'morphOp', {'src' 'bactMask' 'op' 'close' 'dist' 1}

'', 'ExportFields', {'Fields' {'@allMask' '@bactMask' '@microbiotaMask'} 'targetDir' 'seg\' 'updatedLoad' 'load_seg.csv'} 


#
#
#'NN0', 'getNN', {'dynamic' 'bactMask' 'static' 'microbiotaMask' 'mode' 'edge' 'staticOverlap' 1 'repeats' 100 'confidence' 0.01  'verbose' 0}
#'NN0', 'getNN', {'dynamic' 'bactMask' 'static' 'microbiotaMask' 'mode' 'edge' 'staticOverlap' 1 'repeats' 100 'confidence' 0.01  'verbose' 0}

#'G__bact__S02A_t_100', 'getTwoPointCrossCorrMG', {'srcStatic' 'microbiotaMask' 'srcDynamic' 'bactMask'       'random' 'tags'     'repeats' 10 'dr' 1}
#'G__bact__S02A_s_100', 'getTwoPointCrossCorrMG', {'srcStatic' 'microbiotaMask' 'srcDynamic' 'bactMask'       'random' 'shuffle2'    'repeats' 10 'dr' 1}
#'G__bact__S02A_c_100', 'getTwoPointCrossCorrMG', {'srcStatic' 'microbiotaMask' 'srcDynamic' 'bactMask'       'random' 'CSR'     'repeats' 10 'dr' 1}


<entities>
targetName, resName, funcName, parameters
'bacteria', '', 'createEntitiesFromSeg', {'seg' 'bactMask' 'properties' {'Area' 'pixelIdxList' 'Centroid'} }
'bacteria', 'area', 'resFromRegions', {'regionProp' 'Area'}


<analysis>
resName, funcName, entities, parameters
'bacteriaSizeDistribution', 'aggrSizeDistribution', 'bacteria', {'aggrArea' 'area' 'bins_min' 0 'bins_max' 5 'bins_step' 0.1}


<output>
stage, funcName, srcName, filter, hold, parameters
#'data', 'displayRGBBF', '', {}, {}, {'R' 'microbiotaMask' 'Rscale' [0 3] 'G' 'bactMask' 'Gscale' [0 3] 'B' '' '' [0 3] 'BG' 'BF'}

#'data', 'showNN', 'NN0' , {'time' {16}}, {}, {'mode' 'notbins' 'cumulative' 1 'confidence' 0.01 'norm' 'area'}
#'data', 'showNN', 'NN0' , {'time' {16}}, {}, {'mode' 'notbins' 'cumulative' 1 'confidence' 0.01 'norm' 'fraction'}
'data', 'showNN', 'NN0' , {},{'exper'}, {'mode' '123' 'cumulative' 1 'confidence' 0.01 'norm' 'fraction'}
'data', 'showNN', 'NN0' , {},{'exper'}, {'mode' 'relative' 'cumulative' 1 'confidence' 0.01 'norm' 'fraction'}
#'data', 'showNN', 'NN0' , {'time' {16}}, {'time'}, {'mode' 'notbins' 'cumulative' 1  'confidence' 0.01}

#'data', 'showTwoPointCorr', 'pc_r', {}, {}, {}
#'data', 'showTwoPointCorr', 'pc_r', {'well' {'A4' 'D2'} 'time' {16}}, {}, {}
#'data', 'showTwoPointCorr', 'pc_s', {'well' {'A4' 'D2'} 'time' {16}}, {}, {}

#'data', 'showTwoPointCorr', 'pc_r', {'time' {16}}, {}, {}
#'data', 'showTwoPointCorr', 'pc_s', {'time' {16}}, {}, {}
#'data', 'showTwoPointCorrDouble', '', {'time' {16}}, {}, {}


#'data', 'showTwoPointCorrDouble', '', {}, {}, {'CSRname' 'pc_r_2' 'SFLname' 'pc_s_2'}
#'data', 'showTwoPointCorrDouble', '', {}, {}, {'CSRname' 'pc_r_4' 'SFLname' 'pc_s_4'}
#'data', 'showTwoPointCorrDouble', '', {'time' {16}}, {}, {'CSRname' 'pc_r' 'SFLname' 'pc_s'}
